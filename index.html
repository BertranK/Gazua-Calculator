<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê°€ì¦ˆì•„ ê³„ì‚°ê¸° ğŸ’°</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #f0f0f0;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    .container {
      width: 100%;
      padding: 20px;
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      position: relative;
    }
    h1 {
      text-align: center;
      color: #4a4a4a;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }
    label {
      display: block;
      margin-bottom: 5px;
      color: #4a4a4a;
    }
    input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      margin-bottom: 10px;
    }
    #expectedReturn {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      font-weight: bold;
      color: #4a4a4a;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 10px;
      border-radius: 5px;
    }
    .language-button {
      position: fixed;
      top: 20px;
      right: 20px;
      min-width: 80px;
      min-height: 30px;
      padding: 5px;
      font-size: 14px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      z-index: 1000;
    }
    .example {
      font-size: 14px;
      color: #777;
      margin-top: 5px;
    }
    .market-returns {
      font-size: 14px;
      color: #777;
      margin-top: 10px;
    }
    canvas {
      min-height: 400px;
    }
    table {
      width: 100%;
      margin-top: 20px;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ddd;
      text-align: center;
      opacity: 1;
      transition: opacity 0.5s ease-in-out;
    }
    th {
      background-color: #f9f9f9;
    }
    .fade-in {
      opacity: 1;
    }
    @media screen and (max-width: 1200px) {
      #expectedReturn {
        font-size: 20px;
      }
      .language-button {
        min-width: 60px;
        min-height: 30px;
        font-size: 12px;
      }
      canvas {
        min-height: 300px;
      }
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <h1 data-lang="ko">ê°€ì¦ˆì•„ ê³„ì‚°ê¸° ğŸ’°</h1>
    <h1 data-lang="en" style="display: none;">Gazua Calculator ğŸ’°</h1>
    
    <button class="language-button" onclick="toggleLanguage()">Eng</button>

    <label for="currentAssets" data-lang="ko">í˜„ì¬ ìì‚° (ë§Œì›) ğŸ’¼:</label>
    <label for="currentAssets" data-lang="en" style="display: none;">Current Assets ($10,000) ğŸ’¼:</label>
    <input type="number" id="currentAssets" name="currentAssets" min="0" value="1000" required><br>

    <label for="annualSavings" data-lang="ko">ì—°ê°„ ì ë¦½ì•¡ (ë§Œì›) ğŸ¦:</label>
    <label for="annualSavings" data-lang="en" style="display: none;">Annual Savings ($10,000) ğŸ¦:</label>
    <input type="number" id="annualSavings" name="annualSavings" min="0" value="1000" required><br>

    <label for="annualReturn" data-lang="ko">ì—°ê°„ ì˜ˆìƒ ìˆ˜ìµë¥  (%) ğŸ“ˆ:</label>
    <label for="annualReturn" data-lang="en" style="display: none;">Annual Expected Return (%) ğŸ“ˆ:</label>
    <input type="number" id="annualReturn" name="annualReturn" min="0" max="100" step="0.1" value="8" required><br>

    <label for="years" data-lang="ko">Xë…„ ë’¤ê¹Œì§€ ê³„ì‚° ğŸ“…:</label>
    <label for="years" data-lang="en" style="display: none;">Calculate up to X Years ğŸ“…:</label>
    <input type="number" id="years" name="years" min="1" max="100" value="50" required><br>

    <div class="example" data-lang="ko">ì˜ˆì‹œ: ì•ˆì •ì ì¸ í¬íŠ¸í´ë¦¬ì˜¤ì˜ ê²½ìš° 4%, ê³µê²©ì ì¸ í¬íŠ¸í´ë¦¬ì˜¤ì˜ ê²½ìš° 8%</div>
    <div class="example" data-lang="en" style="display: none;">Example: 4% for a conservative portfolio, 8% for an aggressive portfolio</div>
    <div class="market-returns" data-lang="ko">
      ì°¸ê³ : ìµœê·¼ 20ë…„ ë‚˜ìŠ¤ë‹¥ ì—° í‰ê·  ìˆ˜ìµë¥ : ì•½ 16.60%<br>
      S&P500 100ë…„ ì—° í‰ê·  ìˆ˜ìµë¥ : ì•½ 10%
    </div>
    <div class="market-returns" data-lang="en" style="display: none;">
      Note: NASDAQ average annual return (last 20 years): approx. 16.60%<br>
      S&P500 average annual return (last 100 years): approx. 10%
    </div>

    <div style="position: relative;">
      <canvas id="assetChart"></canvas>
      <div id="expectedReturn" data-lang="ko">50ë…„ í›„ ì˜ˆìƒ ìì‚° ì¦ê°€ë¥ : </div>
      <div id="expectedReturn" data-lang="en" style="display: none;">Expected Asset after 50 Years: </div>
    </div>
    
    <h2 data-lang="ko">ìì‚° ì¦ê°€í‘œ ğŸ“Š</h2>
    <h2 data-lang="en" style="display: none;">Asset Growth Table ğŸ“Š</h2>
    <table id="assetsTable">
      <thead>
        <tr>
          <th data-lang="ko">ë…„ì°¨</th>
          <th data-lang="en" style="display: none;">Year</th>
          <th data-lang="ko">ìì‚°</th>
          <th data-lang="en" style="display: none;">Assets</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    let chart;

    function formatAssetValue(value) {
      if (value >= 100000000) {
        return (value / 100000000).toFixed(0) + ' ì¡°';
      } else if (value >= 10000) {
        return (value / 10000).toFixed(0) + ' ì–µ';
      } else {
        return value.toFixed(0) + ' ë§Œì›';
      }
    }

    function calculateAssets() {
      const currentAssets = Number(document.getElementById('currentAssets').value);
      const annualSavings = Number(document.getElementById('annualSavings').value);
      const annualReturn = Number(document.getElementById('annualReturn').value) / 100;
      const years = Number(document.getElementById('years').value);

      let assets = [currentAssets];
      for (let i = 1; i <= years; i++) {
        const prevAssets = assets[i - 1];
        const newAssets = prevAssets * (1 + annualReturn) + annualSavings;
        assets.push(newAssets);
      }

      const expectedReturn = ((assets[years] / assets[0]) - 1) * 100;
      document.querySelectorAll('#expectedReturn').forEach(el => {
        el.textContent = el.getAttribute('data-lang') === 'ko'
          ? `${years}ë…„ í›„ ì˜ˆìƒ ê¸°ëŒ€ ìˆ˜ìµë¥ : ${expectedReturn.toFixed(2)}%`
          : `Expected Return after ${years} Years: ${expectedReturn.toFixed(2)}%`;
      });

      if (chart) {
        chart.data.labels = Array.from({length: years + 1}, (_, i) => i);
        chart.data.datasets[0].data = assets;
        chart.options.scales.x.title.text = document.documentElement.lang === 'ko' ? 'ë…„ì°¨' : 'Year';
        chart.options.scales.y.title.text = document.documentElement.lang === 'ko' ? 'ìì‚°' : 'Assets';
        chart.data.datasets[0].label = document.documentElement.lang === 'ko' ? 'ìì‚°' : 'Assets';
        chart.update();
      } else {
        chart = new Chart(document.getElementById('assetChart'), {
          type: 'bar',
          data: {
            labels: Array.from({length: years + 1}, (_, i) => i),
            datasets: [{
              label: 'ìì‚°',
              data: assets,
              backgroundColor: 'rgba(75, 192, 192, 0.6)',
              borderColor: 'rgba(75, 192, 192, 1)',
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: {
                title: {
                  display: true,
                  text: 'ë…„ì°¨'
                }
              },
              y: {
                beginAtZero: true,
                title: {
                  display: true,
                  text: 'ìì‚°'
                },
                ticks: {
                  callback: function(value) {
                    return formatAssetValue(value);
                  }
                }
              }
            },
            animation: {
              duration: 500,
              easing: 'easeOutQuart'
            },
            plugins: {
              legend: {
                labels: {
                  font: {
                    size: 14
                  }
                }
              }
            }
          }
        });
      }

      updateTable(assets, years);
    }

    function updateTable(assets, years) {
      const tbody = document.getElementById('assetsTable').querySelector('tbody');
      tbody.innerHTML = '';

      assets.forEach((asset, index) => {
        const row = document.createElement('tr');
        const yearCell = document.createElement('td');
        const assetCell = document.createElement('td');

        yearCell.textContent = index;
        assetCell.textContent = formatAssetValue(asset);

        row.appendChild(yearCell);
        row.appendChild(assetCell);
        tbody.appendChild(row);

        // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ ì¶”ê°€
        setTimeout(() => {
          row.childNodes.forEach(cell => cell.classList.add('fade-in'));
        }, 50);
      });
    }

    function toggleLanguage() {
      const currentLang = document.documentElement.lang;
      const newLang = currentLang === 'ko' ? 'en' : 'ko';
      document.documentElement.lang = newLang;
      document.querySelectorAll(`[data-lang]:not([data-lang="${newLang}"])`).forEach(el => el.style.display = 'none');
      document.querySelectorAll(`[data-lang="${newLang}"]`).forEach(el => el.style.display = '');
      document.querySelector('.language-button').textContent = newLang === 'ko' ? 'Eng' : 'í•œê¸€';
      calculateAssets();
    }

    document.getElementById('currentAssets').addEventListener('input', calculateAssets);
    document.getElementById('annualSavings').addEventListener('input', calculateAssets);
    document.getElementById('annualReturn').addEventListener('input', calculateAssets);
    document.getElementById('years').addEventListener('input', calculateAssets);

    // ì´ˆê¸° ê³„ì‚°
    calculateAssets();
  </script>
</body>
</html>
